
<script>
controlForm({
	view 			: view,
	getMeta			: 'example.FieldDemo.get_meta',
	getMetaParams	: undefined,
	getData			: 'example.FieldDemo.get',
	getDataParams	: view.params,
	putData			: 'example.FieldDemo.put',
	putDataParams	: view.params,
	delData			: 'example.FieldDemo.delete',	
	defaultFocus	: [ "stringTest" ],
	closeAfterSave	: true,
	loadCallback	: function(result) {
		if (result.data)
		{
			title="Edit field demo "+result.data.stringTest;
			$(document).trigger("menu.add_favorite",{
				menu:		"example",	
				title: 		"Edit "+result.data.stringTest,
				view:		view
			});
		}
		else
			title="New field demo";

		viewReady({
			view: view,
			title:title
		});

	},
	errorCallback	: function(result) { },
	saveCallback	: function(result) {
		view.params._id=result.data._id;
		$(document).trigger("menu.add_favorite",{
			menu:		"example",	
			title: 		"Edit "+result.data.stringTest,
			view:		view
		});
	}
});


</script>

<p>If you clicked the 'gray row' in the list, you're creating a new item. Otherwise you're editting an existing item.</p>

<p>Notice how the favorites in the menu will be updated in realtime. (the menu actually has its own model and view)</p>

<p>Also notice how the changed fields will be highlighted in the list, once you save the form. (or delete the item)</p>

<p>All input validation and error checking will be done by the model, which will throw an exception if something is wrong. This exception is presented to the user as a nice highlighted field with the corresponding message. (try to fill in a string in the number field for example)</p>

<p>Logging also will be done by the model, but the rpc-system will make sure the end-user sees these log messages as well, providing valuable feedback.</p>

<p>Try refreshing the page, or pressing your browsers back and forward button. This all should work as expected by the user.</p>

<fieldset style='display:inline-block;'>
	<legend>Basic fields</legend>
	<table>
		<tr>
			<td class='autoMeta' _key='stringTest' _meta='desc'>
			<td class='autoMeta' _key='stringTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='multiselectTest' _meta='desc'>
			<td class='autoMeta' _key='multiselectTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='passwordTest' _meta='desc'>
			<td class='autoMeta' _key='passwordTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='booleanTest' _meta='desc'>
			<td class='autoMeta' _key='booleanTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='floatTest' _meta='desc'>
			<td class='autoMeta' _key='floatTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='integerTest' _meta='desc'>
			<td class='autoMeta' _key='integerTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='selectTest' _meta='desc'>
			<td class='autoMeta' _key='selectTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dateTest' _meta='desc'>
			<td class='autoMeta' _key='dateTest' _timeFormat=''>
		</tr>
	</table>
</fieldset>

<fieldset style='display:inline-block;' >
	<legend>Basic fields in a Dict</legend>
	<table class='autoMeta' _key='dictTest'>
		<tr>
			<td class='autoMeta' _key='dictTest.stringTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.stringTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dictTest.multiselectTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.multiselectTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dictTest.passwordTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.passwordTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dictTest.booleanTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.booleanTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dictTest.floatTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.floatTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dictTest.integerTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.integerTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dictTest.selectTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.selectTest'>
		</tr>
		<tr>
			<td class='autoMeta' _key='dictTest.dateTest' _meta='desc'>
			<td class='autoMeta' _key='dictTest.dateTest' _allowTime>
		</tr>
	</table>
</fieldset>

<fieldset  style='display:inline-block;' >
	<legend>Basic fields in a List</legend>
	<p>This list is completely dynamic: the user can add, delete and move rows. New rows are added by focussing a field in the 'gray row'. Notice this is all client side: The data will only be send to the server once the user clicks save.</p>
	<table >
		<thead >
			<tr class='autoMeta' _key='listTest'>
				<td>
				<td class='autoMeta' _key='listTest.stringTest' _meta='desc'>
				<td class='autoMeta' _key='listTest.multiselectTest' _meta='desc'>
				<td class='autoMeta' _key='listTest.passwordTest' _meta='desc'>
				<td class='autoMeta' _key='listTest.booleanTest' _meta='desc'>
				<td class='autoMeta' _key='listTest.floatTest' _meta='desc'>
				<td class='autoMeta' _key='listTest.integerTest' _meta='desc'>
				<td class='autoMeta' _key='listTest.selectTest' _meta='desc'>
				<td class='autoMeta' _key='listTest.dateTest' _meta='desc'>
				<td>
				<td>
			</tr>
		</thead>
		<tbody class='controlSortable'>
			<tr class='colorRows autoMeta autoListSource ui-widget-content' _key='listTest'  _index='_id'>
				<td class='controlOnDragSort ui-icon ui-icon-arrowthick-2-n-s'> 
				<td class='autoMeta controlOnFocusAdd' _key='listTest.stringTest'>
				<td class='autoMeta controlOnFocusAdd' _key='listTest.multiselectTest'>
				<td class='autoMeta controlOnFocusAdd' _key='listTest.passwordTest'>
				<td class='autoMeta controlOnFocusAdd' _key='listTest.booleanTest'>
				<td class='autoMeta controlOnFocusAdd' _key='listTest.floatTest'>
				<td class='autoMeta controlOnFocusAdd' _key='listTest.integerTest'>
				<td class='autoMeta controlOnFocusAdd' _key='listTest.selectTest'>
				<td class='autoMeta controlOnFocusAdd' _key='listTest.dateTest'>
				<td class='controlOnClickDel ui-icon ui-icon-trash'>
				<td class='controlOnClickAdd ui-icon ui-icon-plus'>
			</tr>
		</tbody>
	</table>
</fieldset>


<div class='floatingBar viewErrorClass'>
	<button class='controlOnClickSave' >Save</button>
	<button class='controlOnClickDel' >Delete</button>
	<button class='controlOnClickCancel' >Cancel</button>
	<span class='viewErrorText'></span>
</div>
